<!doctype html>
<html> 
<head> 
<title> Details </title> 
       <link rel="stylesheet" href="amit.css">
      <script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>

      <script>
      
         var url=new URL(window.location.href);
		var id=url.searchParams.get('id');
		console.log(id);
		
		function FillDetails(){
						$.ajax	({
						url: 'http://localhost:61666/api/Pinfoes/'+id,
						type: 'GET',
						dataType: 'json', 
						success: function(EmpDetail){ 
							$('#Eid').val(EmpDetail['Eid']);
							$("#Name").val(EmpDetail['Name']);
							$("#Address").val(EmpDetail['Address']);
							$("#Dob").val(EmpDetail['Dob']);
							$("#Gender").val(EmpDetail['Gender']);
							$("#Designation").val(EmpDetail['Designation']);
							$("#Fathersname").val(EmpDetail['Fathersname']);
                            $("#Supervisor").val(EmpDetail['Supervisor']);
                            $("#Emailid").val(EmpDetail['Emailid']);
                             $("#Mobile").val(EmpDetail['Mobile']);
                             $("#City").val(EmpDetail['City']);
                             $("#State").val(EmpDetail['State']);
                            
                            
						}
					});
		};
             
    
       //    UPDATE FUNCTION  //
             function Edit(){
                
                 
    console.log(Empid);
                 
                
                 
                 
              var Name = document.getElementById("Name").value;
             var Mobile = document.getElementById("Mobile").value;
             var Emailid= document.getElementById("Emailid").value;
            var Dob = document.getElementById("Dob").value;
                  
            var Fathersname= document.getElementById("Fathersname").value;       
            
           var Address= document.getElementById("Address").value;
        
            var City= document.getElementById("City").value;
             
            var Supervisor= document.getElementById("Supervisor").value;
            
            var State= document.getElementById("State").value;  
                        
            var Empid= document.getElementById("Eid").value;
            
            var Designation = document.getElementById("Designation").value;
                 // here added
                  var Gender = document.getElementById("Gender").value;
                 
            
         
                  
        var userdata = {
           "Eid":Empid,
            "Name": Name,
           "Designation": Designation, 
            "Mobile": Mobile,  
            "Dob":Dob,
            "Emailid": Emailid,
            "Fathersname":Fathersname,
            "Address":Address,
            "City":City,
            "Supervisor":Supervisor,
            "State":State,
            "Gender":Gender,
            
            
        
        };console.log(userdata);
        
        $.ajax({
            type: 'PUT',
            url: 'http://localhost:61666/api/Pinfoes/' +Empid,  
            data: userdata,
            success: function(data) {
    
                alert("User Info Updated !!");
                location.replace("list.html");
            }
        });
    };
        
             ////////////////////             DELETE FUNCTION          ///////////////////////

    function Remove(){ 
        var Empid=document.getElementById("Eid").value;
        
        $.ajax({
            type: 'DELETE',
            url: 'http://localhost:61666/api/Pinfoes/' + Empid,
            success: function(data) {                
                alert("User deleted !!");

                location.replace("list.html");
            }
        });
    };

    
    
</script>
 
    </head>
<body onload="FillDetails()">
 <div class='header'>
            <div class='header-image'>
                    <img src='https://hrms.cygrp.com/content/images/logo.png' class='header-logo'>
                </div>
        
        <ul class='nav'>
            
            <li><a href ="index.html"><button >Logout</button></a></li>
            
        
            <li><button id ="remove" onclick="Remove();">Delete</button></li>
            <li><button id ="Edit" onclick="Edit();">Update</button></li>
        
        </ul>
     </div>
   
    
    
     <div class="container">
   
    <form class="form">
         <div class='form-container'>
         <div class='box-container'>
           NAME: <input type="text" id="Name">
        </div>
        <div class='box-container'>
       Gender  : <input type="text" id="Gender">
        </div>
        <div class='box-container'>
           Father'sName: <input type ="text" id ="Fathersname">
        </div>
        <div class='box-container'>
             Dob: <input type="Date" id="Dob">
        </div>
        <div class='box-container'>
             Mobile no:<input type ="text" id ="Mobile">
        </div>
       
        <div class='box-container'>
            Emailid:<input type ="text" id ="Emailid">
        </div>
        <div class='box-container'>
        Address:<input type ="text" id ="Address">
        </div>
        <div class='box-container'>
        City:<input type ="text" id ="City">
        </div>
        <div class='box-container'>
              State:<input type ="text" id ="State">
        </div>
        </div>
        
         <div class='form-container'>
         <div class='box-container'>
                Eid  :<input type ="text" id ="Eid">
        </div>
        <div class='box-container'>
        Designation:<input type ="text" id ="Designation">
        </div>
        <div class='box-container'>
         Supervisor:<input type ="text" id ="Supervisor">
        </div>
        </div>
        
                
    </form>
    </div>

   
   
</body>
</html>
